# Google Cloud Console設定手順書（BUNGU SQUADランキングシステム用）

**対象者**: ワラビサコさん  
**作成日**: 2025年7月25日  
**目的**: Google Sheets APIを使用したバックエンドシステム構築のための初期設定  
**所要時間**: 約15-20分

---

## 🎯 **設定完了後にできること**

- Google Spreadsheetsを完全自動で構築（9シート・126列の詳細構成）
- BUNGU SQUADランキングシステムのデータベースとして稼働
- 月額費用：**完全無料**（Google Sheets無料枠）

---

## 📋 **事前準備**

### ✅ **必要なもの**
- Googleアカウント（既存のものでOK）
- ブラウザ（Chrome推奨）
- 約15-20分の作業時間

### 📝 **作業概要**
1. Google Cloud Console プロジェクト作成
2. Google Sheets API有効化
3. サービスアカウント作成
4. 認証キー（JSON）のダウンロード
5. スプレッドシートへの権限付与

---

## 🚀 **Step 1: Google Cloud Console プロジェクト作成**

### 1-1. Google Cloud Console にアクセス
- **URL**: https://console.cloud.google.com/
- Googleアカウントでログイン

### 1-2. 新しいプロジェクト作成
1. 上部のプロジェクト選択部分をクリック
2. 「新しいプロジェクトを作成」をクリック
3. **プロジェクト名**: `bungu-squad-ranking`
4. **組織**: 選択不要（そのまま）
5. 「作成」ボタンをクリック

### 1-3. プロジェクト選択
- 作成したプロジェクト「bungu-squad-ranking」が選択されていることを確認

---

## 🔧 **Step 2: Google Sheets API有効化**

### 2-1. APIライブラリを開く
1. 左側メニューの「APIとサービス」→「ライブラリ」をクリック
2. 検索窓に「Google Sheets API」と入力
3. 「Google Sheets API」をクリック
4. 「有効にする」ボタンをクリック

### 2-2. 有効化確認
- 「API が有効になりました」メッセージが表示されればOK

---

## 👤 **Step 3: サービスアカウント作成**

### 3-1. 認証情報画面を開く
1. 左側メニューの「APIとサービス」→「認証情報」をクリック
2. 上部の「+ 認証情報を作成」→「サービス アカウント」をクリック

### 3-2. サービスアカウント詳細
- **サービスアカウント名**: `bungu-squad-sheets-access`
- **サービスアカウントID**: 自動生成されるのでそのまま
- **説明**: `BUNGU SQUADランキングシステム用スプレッドシートアクセス`
- 「作成して続行」をクリック

### 3-3. 権限設定
- **役割**: 「編集者」を選択
- 「続行」をクリック
- 次の画面は何も入力せず「完了」をクリック

---

## 🔑 **Step 4: 認証キー（JSON）のダウンロード**

### 4-1. サービスアカウント一覧で作業
1. 作成されたサービスアカウント「bungu-squad-sheets-access」をクリック
2. 上部の「キー」タブをクリック
3. 「鍵を追加」→「新しい鍵を作成」をクリック

### 4-2. キーのダウンロード
1. **キーのタイプ**: 「JSON」を選択（デフォルト）
2. 「作成」をクリック
3. JSONファイルが自動ダウンロードされます

### 4-3. 重要な情報をメモ
ダウンロードしたJSONファイルを開いて、以下の情報をメモしてください：

```json
{
  "type": "service_account",
  "project_id": "bungu-squad-ranking-XXXXX",
  "private_key_id": "...",
  "private_key": "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n",
  "client_email": "bungu-squad-sheets-access@bungu-squad-ranking-XXXXX.iam.gserviceaccount.com",
  ...
}
```

**特に重要**: `client_email` の値（後で使用）

---

## 📊 **Step 5: スプレッドシートへの権限付与**

### 5-1. スプレッドシートを開く
- **URL**: https://docs.google.com/spreadsheets/d/1tFa04F1Rdg5gHxPMOaky99NHM-8VORuix6MhjYipBeA/edit?usp=sharing

### 5-2. 共有設定
1. 右上の「共有」ボタンをクリック
2. 「ユーザーやグループを追加」の欄に以下を入力：
   ```
   bungu-squad-sheets-access@bungu-squad-ranking-XXXXX.iam.gserviceaccount.com
   ```
   ※ XXXXXの部分は、Step 4-3でメモしたclient_emailの値
3. 権限を「編集者」に設定
4. 「送信」をクリック

### 5-3. 確認
- サービスアカウントが共有ユーザーとして追加されていることを確認

---

## 📤 **Step 6: 情報の共有**

以下の情報を開発者（Claude Code）に共有してください：

### 📋 **共有が必要な情報**

1. **プロジェクトID**: `bungu-squad-ranking-XXXXX`
2. **スプレッドシートID**: `1tFa04F1Rdg5gHxPMOaky99NHM-8VORuix6MhjYipBeA`
3. **JSONファイル全体の内容**（Step 4でダウンロード）

### 📧 **共有方法**
- セキュリティ上、JSONファイルはメールやSlackなどの安全な方法で共有
- または、JSONファイルの内容をテキストとしてコピー&ペースト

---

## ✅ **設定完了確認**

以下がすべて完了していれば設定完了です：

- [ ] Google Cloud Consoleプロジェクト作成完了
- [ ] Google Sheets API有効化完了
- [ ] サービスアカウント作成完了
- [ ] JSONキーファイルダウンロード完了
- [ ] スプレッドシートへの権限付与完了
- [ ] JSONファイル内容を開発者に共有完了

---

## 🎯 **次のステップ**

設定完了後、開発者（Claude Code）が以下を自動実行します：

1. **スプレッドシート自動構築**
   - 9シート作成（Players, MatchResults, Tournaments等）
   - 126列の詳細フィールド設定
   - サンプルデータの投入

2. **バックエンドAPI実装**
   - Vercelプロジェクト作成
   - Google Sheets連携API構築
   - フロントエンドとの接続

3. **動作テスト**
   - 全機能の動作確認
   - 8月8日合宿での運用準備完了

---

## 🆘 **トラブルシューティング**

### よくある問題と解決法

#### **問題**: プロジェクト作成で「権限がない」エラー
**解決**: Googleアカウントに組織制限がある場合があります。個人Googleアカウントを使用してください。

#### **問題**: API有効化で「課金が必要」メッセージ
**解決**: Google Sheets APIは無料枠内で利用可能です。課金設定は不要ですが、念のためクレジットカード登録を求められる場合があります。

#### **問題**: スプレッドシートで「権限がない」エラー  
**解決**: client_emailのコピーミスが多いです。JSONファイルから正確にコピーしてください。

#### **問題**: JSONファイルがダウンロードされない
**解決**: ブラウザのダウンロード設定を確認し、ポップアップブロックを無効にしてください。

---

## 📞 **サポート**

設定中に問題が発生した場合：
- スクリーンショットと一緒にエラーメッセージを共有
- どのステップで問題が発生したかを明記
- 可能な限り詳細な状況説明をお願いします

---

**作成者**: Claude Code  
**対象プロジェクト**: BUNGU SQUADランキングシステム  
**更新日**: 2025年7月25日

設定完了後、**月額費用ゼロ**で高品質なランキングシステムが稼働します！