# BUNGU SQUAD ランキングシステム 拡張仕様書

## 概要
プレイヤー自己申告 + 管理者承認システムによる年間ランキング管理システム

## 1. プレイヤー機能

### 1.1 対戦結果申告システム
- **自己申告**: プレイヤーが勝敗結果をボタンで申告
- **対戦相手選択**: 登録済みプレイヤーリストから選択
- **申告内容**: 
  - 対戦相手
  - 勝敗結果
  - 対戦日時（自動記録 + 手動修正可能）
  - 大会参加の場合は大会情報も記録

### 1.2 ランキング確認機能
- **現在の順位**: リアルタイム表示
- **自分のEloレーティング**: 数値表示
- **年間成績**: 勝敗数、参戦数
- **チャンピオンバッジ**: 過去の優勝歴表示（金・銀・銅の星）
- **参加大会履歴**: 参加した大会一覧

### 1.3 大会参加システム
- **QRコード読み込み**: 管理者が生成したQRコードをスキャン
- **大会参加登録**: QRコード読み込みで自動参加
- **参加履歴確認**: 過去参加した大会の記録

## 2. 管理者機能

### 2.1 申告承認システム
- **申告一覧表示**: 未承認の対戦結果申告
- **詳細確認**: 対戦者、日時、結果の確認
- **承認/却下**: ボタンでの簡単操作
- **承認期限**: 24時間以内の対応（前回打ち合わせ決定事項）

### 2.2 大会管理機能
- **大会作成**: 大会名、開催日、場所等の登録
- **QRコード生成**: 大会参加用のユニークQRコード生成
- **参加者管理**: 大会ごとの参加者リスト
- **大会ログ**: 誰がどの大会に参加したかの記録

### 2.3 システム管理
- **年間リセット**: 年末の手動リセット機能
- **プレイヤー管理**: ユーザー登録承認、アカウント管理
- **統計データ**: 全体の活動状況確認

## 3. 年間ランキングシステム

### 3.1 シーズン管理
- **年間サイクル**: 1月1日〜12月31日
- **年末発表**: 年間チャンピオン決定
- **年始リセット**: Eloレーティング初期値に戻す
- **累計記録保持**: リセットとは別に全期間の記録を保持

### 3.2 チャンピオンバッジシステム
- **金の星** (★): 年間1位
- **銀の星** (☆): 年間2位  
- **銅の星** (⭐): 年間3位
- **複数回優勝**: 同一人物が複数回優勝した場合、星の数で表示
  - 例: ★★★（3回優勝）
- **バッジ表示**: プレイヤー名の横に常時表示

## 4. データ管理設計

### 4.1 記録する情報
**対戦記録**:
- 対戦者A・B
- 勝敗結果
- 対戦日時
- 申告日時
- 承認日時
- 承認者
- 大会ID（該当する場合）

**大会記録**:
- 大会ID
- 大会名
- 開催日時
- 開催場所
- 参加者リスト
- QRコード情報

**プレイヤー記録**:
- 現在のEloレーティング
- 年間成績（勝敗数、参戦数）
- 累計成績（全期間）
- チャンピオンバッジ履歴
- 参加大会履歴

### 4.2 年間アーカイブ
- 各年のランキング結果保存
- チャンピオン履歴
- 年間統計データ

## 5. システムフロー

### 5.1 対戦結果登録フロー
1. プレイヤーA: 対戦結果を申告
2. システム: 申告を管理者承認待ちリストに追加
3. 管理者: 申告内容を確認・承認
4. システム: Eloレーティング計算・更新
5. システム: ランキング更新

### 5.2 大会参加フロー
1. 管理者: 大会作成・QRコード生成
2. プレイヤー: QRコードスキャン
3. システム: 大会参加登録
4. プレイヤー: 対戦結果申告（大会IDも記録）
5. 管理者: 承認
6. システム: レーティング更新

### 5.3 年間リセットフロー
1. 管理者: 年間ランキング確定
2. システム: チャンピオンバッジ付与
3. システム: 年間データアーカイブ
4. 管理者: 新年度リセット実行
5. システム: Eloレーティング初期化

## 6. 重要なポイント

### 6.1 大会の位置づけ
- **個別大会の優勝者は決めない**
- **対戦成績のみ記録**
- **年間トータルでランキング決定**
- **大会参加履歴は記録として残す**

### 6.2 モチベーション向上要素
- リアルタイムランキング表示
- 過去の栄光（チャンピオンバッジ）の可視化
- 参加履歴の蓄積
- 長期参加者の識別

### 6.3 運営負荷軽減
- プレイヤーの自己申告
- QRコードによる簡単参加登録
- 24時間承認ルール
- 自動計算・更新

## 更新履歴
- 2025-07-21: 初版作成（拡張仕様策定）