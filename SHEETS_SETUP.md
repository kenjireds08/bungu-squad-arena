# Google Sheets ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

## ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çŠ¶æ³ï¼ˆ2025å¹´7æœˆ29æ—¥æ›´æ–°ï¼‰

ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã¯å®Œå…¨ã«Google Sheetsã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã—ã¦ä½¿ç”¨ã—ã¦ãŠã‚Šã€ä»¥ä¸‹ã®ã‚·ãƒ¼ãƒˆãŒç¨¼åƒä¸­ã§ã™ï¼š
- **Players** (ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æƒ…å ±ãƒ»ãƒ©ãƒ³ã‚­ãƒ³ã‚°)
- **Tournaments** (å¤§ä¼šç®¡ç†ãƒ»CRUDæ“ä½œå¯¾å¿œ)
- **MatchResults** (è©¦åˆçµæœãƒ»ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨ˆç®—)
- **TournamentDailyArchive** (æ—¥æ¬¡å¤§ä¼šå‚åŠ è€…ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–)
- **TournamentMatches** (å¤§ä¼šå†…å¯¾æˆ¦çµ„ã¿åˆã‚ã›)

## 1. Google ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®ä½œæˆ

1. [Google Sheets](https://sheets.google.com) ã«ã‚¢ã‚¯ã‚»ã‚¹
2. æ–°ã—ã„ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‚’ä½œæˆ
3. ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®IDã‚’ã‚³ãƒ”ãƒ¼ï¼ˆURLã® `/d/` ã¨ `/edit` ã®é–“ã®éƒ¨åˆ†ï¼‰

## 2. ã‚·ãƒ¼ãƒˆæ§‹é€ ã®è¨­å®š

### Players ã‚·ãƒ¼ãƒˆï¼ˆ24åˆ—ï¼‰
**å¿…é ˆã‚·ãƒ¼ãƒˆ** - ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æƒ…å ±ã¨ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã®ã‚³ã‚¢

| åˆ— | ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | èª¬æ˜ | ä¾‹ |
|---|---|---|---|
| A | id | ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ID | player_001 |
| B | nickname | ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ  | ã‚ãªãŸã®åå‰ |
| C | email | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ | test@example.com |
| D | current_rating | ç¾åœ¨ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚° | 1650 |
| E | annual_wins | å¹´é–“å‹åˆ©æ•° | 12 |
| F | annual_losses | å¹´é–“æ•—åŒ—æ•° | 8 |
| G | total_wins | é€šç®—å‹åˆ©æ•° | 45 |
| H | total_losses | é€šç®—æ•—åŒ—æ•° | 32 |
| I | champion_badges | ãƒãƒ£ãƒ³ãƒ”ã‚ªãƒ³ãƒãƒƒã‚¸æƒ…å ± | 2024:gold,2023:silver |
| J | trump_rule_experienced | ãƒˆãƒ©ãƒ³ãƒ—ãƒ«ãƒ¼ãƒ«çµŒé¨“ | true |
| K | first_trump_game_date | åˆå›ãƒˆãƒ©ãƒ³ãƒ—ã‚²ãƒ¼ãƒ æ—¥ | 2024-01-15 |
| L | cardplus_rule_experienced | ã‚«ãƒ¼ãƒ‰ãƒ—ãƒ©ã‚¹çµŒé¨“ | true |
| M | first_cardplus_game_date | åˆå›ã‚«ãƒ¼ãƒ‰ãƒ—ãƒ©ã‚¹æ—¥ | 2024-02-20 |
| N | registration_date | ç™»éŒ²æ—¥ | 2024-01-01 |
| O | profile_image_url | ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒURL | https://... |
| P | is_active | ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ | true |
| Q | last_activity_date | æœ€çµ‚æ´»å‹•æ—¥ | 2024-07-29 |
| R | player_status | ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼çŠ¶æ…‹ | active |
| S | notification_preferences | é€šçŸ¥è¨­å®š | {"email":true} |
| T | device_tokens | ãƒ‡ãƒã‚¤ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ | ["token1"] |
| U | last_login_date | æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ—¥ | 2024-07-29 |
| V | profile_image_uploaded | ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰çŠ¶æ…‹ | false |
| W | preferred_language | å„ªå…ˆè¨€èª | ja |
| X | tournament_active | å¤§ä¼šå‚åŠ ä¸­ãƒ•ãƒ©ã‚° | FALSE |

### Tournaments ã‚·ãƒ¼ãƒˆï¼ˆ12åˆ—ï¼‰
**CRUDæ“ä½œå¯¾å¿œ** - ç®¡ç†ç”»é¢ã‹ã‚‰ä½œæˆãƒ»ç·¨é›†ãƒ»å‰Šé™¤å¯èƒ½

| åˆ— | ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | èª¬æ˜ | ä¾‹ |
|---|---|---|---|
| A | id | å¤§ä¼šID | tournament_1690123456789 |
| B | tournament_name | å¤§ä¼šå | ç¬¬8å›BUNGU SQUADå¤§ä¼š |
| C | date | é–‹å‚¬æ—¥ | 2025-08-15 |
| D | start_time | é–‹å§‹æ™‚åˆ» | 19:00 |
| E | location | é–‹å‚¬å ´æ‰€ | â—‹â—‹ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚»ãƒ³ã‚¿ãƒ¼ |
| F | qr_code_url | QRã‚³ãƒ¼ãƒ‰URL | (è‡ªå‹•ç”Ÿæˆ) |
| G | created_by | ä½œæˆè€… | admin |
| H | created_at | ä½œæˆæ—¥æ™‚ | 2025-07-29T10:00:00Z |
| I | status | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | upcoming/é–‹å‚¬ä¸­/å®Œäº† |
| J | max_participants | æœ€å¤§å‚åŠ è€…æ•° | 20 |
| K | current_participants | ç¾åœ¨å‚åŠ è€…æ•° | 12 |
| L | tournament_type | å¤§ä¼šã‚¿ã‚¤ãƒ— | random/round-robin |

### MatchResults ã‚·ãƒ¼ãƒˆï¼ˆ34åˆ—ï¼‰
**å®Œå…¨ãªè©¦åˆè¨˜éŒ²ã‚·ã‚¹ãƒ†ãƒ **

| åˆ— | ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | èª¬æ˜ |
|---|---|---|
| A | match_id | è©¦åˆID |
| B | tournament_id | å¤§ä¼šID |
| C | player1_id | ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼1ã®ID |
| D | player2_id | ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼2ã®ID |
| E | winner_id | å‹è€…ID |
| F | loser_id | æ•—è€…ID |
| G | game_rule | ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ« |
| H | match_start_time | è©¦åˆé–‹å§‹æ™‚åˆ» |
| I | match_end_time | è©¦åˆçµ‚äº†æ™‚åˆ» |
| J | match_status | è©¦åˆçŠ¶æ…‹ |
| K | reported_by | å ±å‘Šè€… |
| L | reported_at | å ±å‘Šæ—¥æ™‚ |
| M | approved_by | æ‰¿èªè€… |
| N | approved_at | æ‰¿èªæ—¥æ™‚ |
| O | player1_rating_before | P1è©¦åˆå‰ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚° |
| P | player2_rating_before | P2è©¦åˆå‰ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚° |
| Q | player1_rating_after | P1è©¦åˆå¾Œãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚° |
| R | player2_rating_after | P2è©¦åˆå¾Œãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚° |
| S | player1_rating_change | P1ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å¤‰å‹• |
| T | player2_rating_change | P2ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å¤‰å‹• |
| ... | ... | ï¼ˆä»–ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿åˆ—ï¼‰ |

### TournamentDailyArchive ã‚·ãƒ¼ãƒˆï¼ˆ7åˆ—ï¼‰
**æ—¥æ¬¡å‚åŠ è€…ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–**

| A | B | C | D | E | F | G |
|---|---|---|---|---|---|---|
| archive_id | tournament_date | player_id | player_nickname | entry_timestamp | total_participants_that_day | created_at |

### TournamentMatches ã‚·ãƒ¼ãƒˆï¼ˆ23åˆ—ï¼‰
**å¤§ä¼šå†…çµ„ã¿åˆã‚ã›ç®¡ç†**

| A | B | C | D | E | F | G |
|---|---|---|---|---|---|---|
| match_id | tournament_id | player1_id | player2_id | table_number | match_status | created_at |

## 3. ç¾åœ¨å®Ÿè£…æ¸ˆã¿ã®APIæ©Ÿèƒ½

### ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ç®¡ç†API
- âœ… **GET /api/players** - å…¨ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å–å¾—
- âœ… **GET /api/players?id={id}** - ç‰¹å®šãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å–å¾—
- âœ… **PUT /api/players?id={id}** - ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æƒ…å ±æ›´æ–°
- âœ… **GET /api/rankings** - ãƒ©ãƒ³ã‚­ãƒ³ã‚°å–å¾—ï¼ˆè‡ªå‹•ã‚½ãƒ¼ãƒˆï¼‰

### å¤§ä¼šç®¡ç†APIï¼ˆãƒ•ãƒ«CRUDï¼‰
- âœ… **GET /api/tournaments** - å…¨å¤§ä¼šå–å¾—
- âœ… **POST /api/tournaments** - æ–°è¦å¤§ä¼šä½œæˆ
- âœ… **PUT /api/tournaments?id={id}** - å¤§ä¼šæƒ…å ±æ›´æ–°
- âœ… **DELETE /api/tournaments?id={id}** - å¤§ä¼šå‰Šé™¤

### è©¦åˆç®¡ç†API
- âœ… **GET /api/matches** - è©¦åˆå±¥æ­´å–å¾—
- âœ… **POST /api/matches** - è©¦åˆçµæœç™»éŒ²ï¼ˆè‡ªå‹•ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨ˆç®—ï¼‰

### å¤§ä¼šå‚åŠ ã‚·ã‚¹ãƒ†ãƒ 
- âœ… **tournament_active** ãƒ•ãƒ©ã‚°ã«ã‚ˆã‚‹å‚åŠ ç®¡ç†
- âœ… æ—¥æ¬¡ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ©Ÿèƒ½ï¼ˆå‚åŠ è€…ã®è‡ªå‹•ä¿å­˜ï¼‰
- âœ… QRã‚³ãƒ¼ãƒ‰å¤§ä¼šã‚¨ãƒ³ãƒˆãƒªãƒ¼

## 4. Google Cloud Console ã§ã®è¨­å®š

### Service Account ã®ä½œæˆ
1. [Google Cloud Console](https://console.cloud.google.com/) ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆï¼ˆã¾ãŸã¯æ—¢å­˜ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠï¼‰
3. Google Sheets API ã‚’æœ‰åŠ¹åŒ–
4. ã€ŒIAM ã¨ç®¡ç†ã€â†’ã€Œã‚µãƒ¼ãƒ“ã‚¹ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã€â†’ã€Œã‚µãƒ¼ãƒ“ã‚¹ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã€
5. ã‚µãƒ¼ãƒ“ã‚¹ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåã‚’å…¥åŠ›ã—ã¦ä½œæˆ
6. ä½œæˆã—ãŸã‚µãƒ¼ãƒ“ã‚¹ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ã‚¯ãƒªãƒƒã‚¯
7. ã€Œã‚­ãƒ¼ã€ã‚¿ãƒ–â†’ã€Œã‚­ãƒ¼ã‚’è¿½åŠ ã€â†’ã€Œæ–°ã—ã„ã‚­ãƒ¼ã‚’ä½œæˆã€â†’ã€ŒJSONã€ã‚’é¸æŠ
8. ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸJSONãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼

### ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®å…±æœ‰è¨­å®š
1. Google Sheets ã«æˆ»ã‚‹
2. å³ä¸Šã®ã€Œå…±æœ‰ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ã‚µãƒ¼ãƒ“ã‚¹ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆJSONå†…ã® `client_email`ï¼‰ã‚’è¿½åŠ 
4. æ¨©é™ã‚’ã€Œç·¨é›†è€…ã€ã«è¨­å®š

## 5. Vercel ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

Vercel ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä»¥ä¸‹ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šï¼š

```bash
GOOGLE_SHEETS_ID=ã‚ãªãŸã®ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆID
GOOGLE_SERVICE_ACCOUNT_KEY=ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®JSONã‚­ãƒ¼ï¼ˆæ–‡å­—åˆ—ã¨ã—ã¦ï¼‰
FRONTEND_URL=https://bungu-squad-arena.vercel.app
```

## 6. ç¾åœ¨ã®ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ³

### å®Œäº†ã—ãŸå®Ÿè£…
- âœ… **ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿æ’¤å»ƒ** - å…¨ã¦Google Sheets APIä½¿ç”¨
- âœ… **AdminTournaments** - ç®¡ç†ç”»é¢ã§ã®å¤§ä¼šCRUDæ“ä½œ
- âœ… **TournamentEntryComplete** - APIé€£æºå®Œäº†
- âœ… **MainDashboard** - APIçµŒç”±ã§ã®å¤§ä¼šè¡¨ç¤º
- âœ… **ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ** - è‡ªå‹•ELOè¨ˆç®—
- âœ… **QRã‚³ãƒ¼ãƒ‰æ©Ÿèƒ½** - PWAã‚«ãƒ¡ãƒ©å•é¡Œè§£æ±ºæ¸ˆã¿

### å®Ÿè£…å¾…ã¡ã®æ©Ÿèƒ½
- ğŸ”„ **æ®‹ã‚Šã®Tournamenté–¢é€£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ** ã®APIåŒ–
- ğŸ”„ **å¤§ä¼šã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è‡ªå‹•ç®¡ç†** (é–‹å‚¬ä¸­â†’å®Œäº†)
- ğŸ”„ **çµ„ã¿åˆã‚ã›æ©Ÿèƒ½** (è‡ªå‹•ç”Ÿæˆãƒ»ç®¡ç†è€…ç¢ºå®š)
- ğŸ”„ **ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ **

## 7. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç›£è¦–ãƒ»ç¢ºèªæ–¹æ³•

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç¢ºèª
```bash
# ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ•°ç¢ºèª
curl https://bungu-squad-arena.vercel.app/api/players | jq length

# ç¾åœ¨ã®å¤§ä¼šä¸€è¦§
curl https://bungu-squad-arena.vercel.app/api/tournaments | jq '.[].tournament_name'

# ãƒ©ãƒ³ã‚­ãƒ³ã‚°ä¸Šä½5å
curl https://bungu-squad-arena.vercel.app/api/rankings | jq '.[0:5] | .[].nickname'
```

### Google Sheets ç›´æ¥ç¢ºèª
- **Players** ã‚·ãƒ¼ãƒˆ - Xåˆ—ã§å¤§ä¼šå‚åŠ ä¸­ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ç¢ºèª
- **Tournaments** ã‚·ãƒ¼ãƒˆ - Iåˆ—ã§ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
- **TournamentDailyArchive** - æ—¥æ¬¡å‚åŠ å±¥æ­´

## 8. ãƒãƒƒã‚¸ãƒ»ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ 

### ãƒãƒƒã‚¸ã‚·ã‚¹ãƒ†ãƒ 
- **ãƒãƒ£ãƒ³ãƒ”ã‚ªãƒ³ãƒãƒƒã‚¸**: `2024:gold,2023:silver` å½¢å¼
- **ãƒ«ãƒ¼ãƒ«çµŒé¨“ãƒãƒƒã‚¸**: trump_rule_experienced, cardplus_rule_experienced

### Eloãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ 
- æ–°è¦ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆ10è©¦åˆæœªæº€ï¼‰: Kå€¤ = 40
- ä¸­ç´šãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆ10-30è©¦åˆï¼‰: Kå€¤ = 20  
- ä¸Šç´šãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆ30è©¦åˆä»¥ä¸Šï¼‰: Kå€¤ = 10
- åˆæœŸãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°: 1500pt

## 9. ç·Šæ€¥æ™‚ãƒ»ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ
1. **API ã‚¨ãƒ©ãƒ¼** â†’ Vercelç’°å¢ƒå¤‰æ•°ç¢ºèª
2. **ãƒ‡ãƒ¼ã‚¿ä¸æ•´åˆ** â†’ Google Sheetsæ¨©é™ç¢ºèª
3. **QRã‚¹ã‚­ãƒ£ãƒ³å•é¡Œ** â†’ PWAæ¨©é™ãƒ»ã‚«ãƒ¡ãƒ©è¨­å®šç¢ºèª
4. **ãƒ©ãƒ³ã‚­ãƒ³ã‚°æœªæ›´æ–°** â†’ React Query ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢